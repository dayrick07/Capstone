<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>View User ID</title>
<style>
body { font-family: Arial; background:#f5f6fa; margin:0; padding:0; text-align:center;}
header { background:#2c3e50; padding:20px; color:white; font-size:24px; font-weight:bold;}
.container { margin:30px auto; padding:20px; background:white; border-radius:10px; max-width:800px; box-shadow:0 2px 10px rgba(0,0,0,0.1);}
img { max-width:90%; max-height:80vh; border-radius:10px; border:3px solid #ccc; }
button { margin-top:20px; padding:10px 20px; font-size:16px; border:none; border-radius:5px; background:#3498db; color:white; cursor:pointer; }
</style>
</head>
<body>
<header>View User ID</header>
<div class="container">
<img id="userIdImage" src="" alt="User ID"/>
<br>
<button onclick="goBack()">Back</button>
</div>

<script>
const SERVER_URL = "https://graeme-unintegrated-richelle.ngrok-free.dev";

// Get user ID from query string
const params = new URLSearchParams(window.location.search);
const userId = params.get("id");

async function loadUserId() {
  if (!userId) return alert("Invalid user ID");

  try {
    const res = await fetch(`${SERVER_URL}/admin/pending-users`);
    const users = await res.json();
    const user = users.find(u => u.Id == userId);

    if (!user || !user.validId) {
      alert("User or ID not found");
      return;
    }

    // replace backslashes for correct URL
    document.getElementById("userIdImage").src = `${SERVER_URL}/${user.validId.replace(/\\\\/g,"/")}`;
  } catch (err) {
    console.error("Failed to load user ID:", err);
    alert("Error loading user ID");
  }
}

function goBack() {
  window.history.back();
}

loadUserId();
</script>
</body>
</html>
